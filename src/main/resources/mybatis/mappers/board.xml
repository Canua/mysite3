<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="board">
	<select id="getTotalCount" parameterType="string" resultType="int">
			<![CDATA[
			select count(*)
			 from board
			]]>
			<if test="_parameter != null and _parameter!=''">
			where title like '%${keyword }%'
			 and contents like '%${keyword }%'
			</if>
	</select>
	<insert id="insert" parameterType="boardvo">
		<choose>
			<when test="groupNo == null">
			<![CDATA[
			insert 
			 into board 
			 values (null, #{title }, #{contents } , now(), 0, (SELECT ifnull(max(g_no) + 1, 1) from board a), 1, 0, #{user_no })
			]]>
			</when>
			<otherwise>
			<![CDATA[
				
			]]>
			</otherwise>
		</choose>
	</insert>
</mapper>
